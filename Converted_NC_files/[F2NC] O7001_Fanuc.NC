%
O7001
(VINTOVAYA INTERPOLYACIYA)
(PRIMER: G65 P7001 D4.X30. I30. H2.Z-5.E2. W6. J10.)
; 
(D - DIAMETR INSTRUMENTA #37) 
(I* - NACHALNIY DIAMETR OTVERSTIYA #34)
(X - KONECHNIY DIAMETR OTVERSTIYA #54) 
(W* - STEP/SYOM NA STORONU #53)
(Z - Z KONECHNIY #56)
(H - NACHALNAYA VISOTA #41)
(E - SYOM PO 'Z' #38)
(J*- PERVIY PROHOD #35)
(B*- VISOTA BEZOPASNOSTI #32)
(* - UKAZIVAT' PRI NADOBNOSTI)
; 
; 
#60=150.(PODYYOM PO 'Z' USLOVNIY)
; 
#61=5.(NACHALO RAB.PODACHI Z) 
;
;
#91=#37
#92=#34
#93=#54
#94=#53
#95=#56
#96=#41
#97=#38
#98=#35
#99=#32
; 
; 
IF[#60LE#61]GOTO144
IF[#41LE#56]GOTO145
; 
;
;
IF [[#41GE0]AND[#56LE0]] THEN #87=ABS[#41]+ABS[#56] 
;
IF [[#41LE0]AND[#56LT0]] THEN #87=ABS[#56]-ABS[#41]
;
IF [[#41GT0]AND[#56GE0]] THEN #87=#41-#56 
;
;
IF [#38GT#87] THEN #38=#87
;
#100=0.
;
;
IF[#34GT#54]GOTO140 
IF[#37GT#54]GOTO141 
IF[#37EQ999999]GOTO154
IF[#35GT#37]GOTO142
IF[#53GT#37]GOTO143
IF[[#34NE999999]AND[#54LE#37*2.]]GOTO153
IF[[#34EQ999999]AND[#53GT0.]]GOTO146
IF[[#34GT0.]AND[#53EQ999999]]GOTO146
IF[[#34EQ999999]AND[#35GT0.]]GOTO147
IF[[#53EQ999999]AND[#35GT0.]]GOTO148
IF[#38EQ999999]GOTO149
IF[#56EQ999999]GOTO150
IF[#41EQ999999]GOTO151
IF[#32LT0.]GOTO152
;
IF[#53GT[#54-#34]/2]THEN#53=[#54-#34]/2
IF[#53EQ999999]THEN #53=0.
IF[[#34EQ999999]AND[#53EQ0.]]THEN #100=1.
IF[#100EQ1.]THEN #53=0.01
IF[#100EQ1.]THEN #34=#54-0.02
;
IF[#34LT#37]THEN#34=#37
IF[#35GE[#54-#34]/2]THEN#53=[#54-#34]/2
IF[#35GE[#54-#34]/2]THEN#35=0.
IF[#35EQ999999]THEN#35=0.
IF[#32EQ999999]THEN#32=#60
;
#60=#32
IF[#61GT#60]THEN#61=#60
;
;
#86=0.
#88=0.
#69=0.
;  
; 
; 
#65=#37/2(RADIUS INSTRUMENTA)
#66=#34/2(NACH.RADIUS OTVERSTIYA)
#67=#54/2(KONECH.RADIUS OTVERSTIYA) 
#76=#66-#65(NACH.RADIUS OTVERSTIYA PO FREZE)
#77=#67-#65(KONECH.RADIUS CHERN. OTVERSTIYA PO FREZE)
#68=#67-#66-#35(OBSHIY CHERN. SYOM SO STORONY)
#83=#68/#53
#83=FIX[#83]+[[ROUND[[#83-FIX[#83]]*100]]/100] 
#69=FUP[#83](KOL-VO CHERN. POVTORENIY)
IF[#100EQ1.]THEN#69=1.
#53=#68/#69
#53=FIX[#53]+[[FIX[[#53-FIX[#53]]*1000]]/1000]
#71=#37/2(RADIUS VHODA)
#74=#76+#53-#37(PERVIY PODHOD PO PRYAMOY) 
#75=#74
#81=#53
#86=#87/#38 (KOL-VO PROHODOV PO 'Z')
#86=FIX[#86]+[[FIX[[#86-FIX[#86]]*1000.]]/1000.] 
#88=FIX[#86]
#90=#87-#88*#38 (PODBOR PO 'Z')
;
;
; 
G0G90Z[#41+#60] 
#101=#41+#61]
Z#101G1G90Z#41
#73=#76 (OTPRAVNAYA TOCHKA NA KRUG)
#79=0. (SCHOTCHIK POVTORENIY PO 'X')
IF[#35GT0.]GOTO51
N53
IF[#74GT0.]GOTO50
N58 (*****1*****)
IF[#79GE0.]THEN#53=#81
#79=#79+1.
#73=#73+#53
#78=#73
IF[#73GE#37]THEN#78=#37
#71=#78/2
G2G91X-#78R#71
#89=0.
N54 (**1**)
G2G91I#73J0.Z-#38
#89=#89+1.
IF[#89LT#88]GOTO54 (**1**)
IF[#86GT#88]GOTO56
IF[#86EQ#88]GOTO62
N57
IF[#79EQ0.]THEN #53=#81
#80=#73
IF[#73GE#37-#53]THEN#80=#37-#53
G#85G91X#80
G0G90Z#41
IF[#79 LT #69]GOTO58 (*****1*****)
IF[#80EQ#73]THEN#82=0.
IF[#80LT#73]THEN#82=#73-#80
G0G91X#82
N52
;
G0G90Z[#41+#60]
;
#60=0.
#61=0.
#62=0.
#63=0.
#64=0.
#65=0.
#66=0.
#67=0.
#68=0.
#69=0.
#70=0.
#71=0.
#72=0.
#73=0.
#74=0.
#75=0.
#76=0.
#77=0.
#78=0.
#79=0.
#80=0.
#81=0.
#82=0.
#83=0.
#84=0.
#85=0.
#86=0.
#87=0.
#88=0.
#89=0.
#90=0.
#100=0.
;
#37=#91
#34=#92
#54=#93
#53=#94
#56=#95
#41=#96
#38=#97
#35=#98
#32=#99
;
M99
;  
; 
N50 (DLYA PEREMESHENIYA)
IF[#79GE0.]THEN#53=#81
#78=#37
G0G91X-#74 
N59 (*****2*****)
#79=#79+1.
#73=#73+#53
G2G91X-#78R#71
#89=0.
N55 (**2**)
G2G91I#73J0.Z-#38
#89=#89+1.
IF[#89LT#88]GOTO55 (**2**)
IF[#86GT#88]GOTO60
IF[#86EQ#88]GOTO63
N61
IF[#79EQ0.]THEN #53=#81
G#85G91X[#37-#53]
G0G90Z#41
IF[#79 LT #69]GOTO59 (*****2*****)
#80=#73-#37+#53
G#85G91X#80
GOTO52
;
N51 (DLYA #35>0.)
#53=#35
#79=-1.
#71=#37/2(RADIUS VHODA)
#74=#76+#53-#37(PERVIY PODHOD PO PRYAMOY) 
#75=#74
GOTO53
;
N56
G2G91I#73J0.Z-#90
G2G91I#73J0.
GOTO57
;
N60
G2G91I#73J0.Z-#90
G2G91I#73J0.
GOTO61
;
N62
G2G91I#73J0.
GOTO57
;
N63
G2G91I#73J0.
GOTO61
;  
; 
; 
N140 
M0 
(I>X)
; 
N141 
M0 
(D>X)
;
N142
M0
(J>D)
; 
N143 
M0 
(W>D)
; 
N144 
M0 
(#60<=#61) 
;
N145
M0
(H<=Z)
; 
N146
M0
('I'OR'W'=999999) 
; 
N147
M0
(I=999999 AND J>0.)
;
N148
M0
(W=999999 AND J>0.)
;
N149
M0
(E=999999)
;
N150
M0
(Z=999999)
;
N151
M0
(H=999999)
;
N152
M0
(B<0)
;
N153
M0
(OTV-YE SLISHKOM MALO DLYA UKAZ-YA #I)
;
N154
M0
(D=999999)
;
%