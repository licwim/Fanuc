%
O7001
(VINTOVAYA INTERPOLYACIYA)
(PRIMER: G65 P7001 D4.X30. I30. H2.Z-5.E2. W6. J10.)
; 
(D - DIAMETR INSTRUMENTA #7) 
(I* - NACHALNIY DIAMETR OTVERSTIYA #4)
(X - KONECHNIY DIAMETR OTVERSTIYA #24) 
(W* - STEP/SYOM NA STORONU #23)
(Z - Z KONECHNIY #26)
(H - NACHALNAYA VISOTA #11)
(E - SYOM PO 'Z' #8)
(J*- PERVIY PROHOD #5)
(B*- VISOTA BEZOPASNOSTI #2)
(* - UKAZIVAT' PRI NADOBNOSTI)
; 
; 
#100=150.(PODYYOM PO 'Z' USLOVNIY)
; 
#101=5.(NACHALO RAB.PODACHI Z) 
;
;
#131=#7
#132=#4
#133=#24
#134=#23
#135=#26
#136=#11
#137=#8
#138=#5
#139=#2
; 
; 
IF[#100LE#101]GOTO144
IF[#11LE#26]GOTO145
; 
;
;
IF [[#11GE0]AND[#26LE0]] THEN #127=ABS[#11]+ABS[#26] 
;
IF [[#11LE0]AND[#26LT0]] THEN #127=ABS[#26]-ABS[#11]
;
IF [[#11GT0]AND[#26GE0]] THEN #127=#11-#26 
;
;
IF [#8GT#127] THEN #8=#127
;
#140=0.
;
;
IF[#4GT#24]GOTO140 
IF[#7GT#24]GOTO141 
IF[#7EQ#0]GOTO154
IF[#5GT#7]GOTO142
IF[#23GT#7]GOTO143
IF[[#4NE#0]AND[#24LE#7*2.]]GOTO153
IF[[#4EQ#0]AND[#23GT0.]]GOTO146
IF[[#4GT0.]AND[#23EQ#0]]GOTO146
IF[[#4EQ#0]AND[#5GT0.]]GOTO147
IF[[#23EQ#0]AND[#5GT0.]]GOTO148
IF[#8EQ#0]GOTO149
IF[#26EQ#0]GOTO150
IF[#11EQ#0]GOTO151
IF[#2LT0.]GOTO152
;
IF[#23GT[#24-#4]/2]THEN#23=[#24-#4]/2
IF[#23EQ#0]THEN #23=0.
IF[[#4EQ#0]AND[#23EQ0.]]THEN #140=1.
IF[#140EQ1.]THEN #23=0.01
IF[#140EQ1.]THEN #4=#24-0.02
;
IF[#4LT#7]THEN#4=#7
IF[#5GE[#24-#4]/2]THEN#23=[#24-#4]/2
IF[#5GE[#24-#4]/2]THEN#5=0.
IF[#5EQ#0]THEN#5=0.
IF[#2EQ#0]THEN#2=#100
;
#100=#2
IF[#101GT#100]THEN#101=#100
;
;
#126=0.
#128=0.
#109=0.
;  
; 
; 
#105=#7/2(RADIUS INSTRUMENTA)
#106=#4/2(NACH.RADIUS OTVERSTIYA)
#107=#24/2(KONECH.RADIUS OTVERSTIYA) 
#116=#106-#105(NACH.RADIUS OTVERSTIYA PO FREZE)
#117=#107-#105(KONECH.RADIUS CHERN. OTVERSTIYA PO FREZE)
#108=#107-#106-#5(OBSHIY CHERN. SYOM SO STORONY)
#123=#108/#23
#123=FIX[#123]+[[ROUND[[#123-FIX[#123]]*100]]/100] 
#109=FUP[#123](KOL-VO CHERN. POVTORENIY)
IF[#140EQ1.]THEN#109=1.
#23=#108/#109
#23=FIX[#23]+[[FIX[[#23-FIX[#23]]*1000]]/1000]
#111=#7/2(RADIUS VHODA)
#114=#116+#23-#7(PERVIY PODHOD PO PRYAMOY) 
#115=#114
#121=#23
#126=#127/#8 (KOL-VO PROHODOV PO 'Z')
#126=FIX[#126]+[[FIX[[#126-FIX[#126]]*1000.]]/1000.] 
#128=FIX[#126]
#130=#127-#128*#8 (PODBOR PO 'Z')
;
;
; 
G0G90Z[#11+#100] 
Z[#11+#101]
G1G90Z#11
#113=#116 (OTPRAVNAYA TOCHKA NA KRUG)
#119=0. (SCHOTCHIK POVTORENIY PO 'X')
IF[#5GT0.]GOTO51
N53
IF[#114GT0.]GOTO50
N58 (*****1*****)
IF[#119GE0.]THEN#23=#121
#119=#119+1.
#113=#113+#23
#118=#113
IF[#113GE#7]THEN#118=#7
#111=#118/2
G2G91X-#118R#111
#129=0.
N54 (**1**)
G2G91I#113J0.Z-#8
#129=#129+1.
IF[#129LT#128]GOTO54 (**1**)
IF[#126GT#128]GOTO56
IF[#126EQ#128]GOTO62
N57
IF[#119EQ0.]THEN #23=#121
#120=#113
IF[#113GE#7-#23]THEN#120=#7-#23
G#125G91X#120
G0G90Z#11
IF[#119 LT #109]GOTO58 (*****1*****)
IF[#120EQ#113]THEN#122=0.
IF[#120LT#113]THEN#122=#113-#120
G0G91X#122
N52
;
G0G90Z[#11+#100]
;
#100=0.
#101=0.
#102=0.
#103=0.
#104=0.
#105=0.
#106=0.
#107=0.
#108=0.
#109=0.
#110=0.
#111=0.
#112=0.
#113=0.
#114=0.
#115=0.
#116=0.
#117=0.
#118=0.
#119=0.
#120=0.
#121=0.
#122=0.
#123=0.
#124=0.
#125=0.
#126=0.
#127=0.
#128=0.
#129=0.
#130=0.
#140=0.
;
#7=#131
#4=#132
#24=#133
#23=#134
#26=#135
#11=#136
#8=#137
#5=#138
#2=#139
;
M99
;  
; 
N50 (DLYA PEREMESHENIYA)
IF[#119GE0.]THEN#23=#121
#118=#7
G0G91X-#114 
N59 (*****2*****)
#119=#119+1.
#113=#113+#23
G2G91X-#118R#111
#129=0.
N55 (**2**)
G2G91I#113J0.Z-#8
#129=#129+1.
IF[#129LT#128]GOTO55 (**2**)
IF[#126GT#128]GOTO60
IF[#126EQ#128]GOTO63
N61
IF[#119EQ0.]THEN #23=#121
G#125G91X[#7-#23]
G0G90Z#11
IF[#119 LT #109]GOTO59 (*****2*****)
#120=#113-#7+#23
G#125G91X#120
GOTO52
;
N51 (DLYA #5>0.)
#23=#5
#119=-1.
#111=#7/2(RADIUS VHODA)
#114=#116+#23-#7(PERVIY PODHOD PO PRYAMOY) 
#115=#114
GOTO53
;
N56
G2G91I#113J0.Z-#130
G2G91I#113J0.
GOTO57
;
N60
G2G91I#113J0.Z-#130
G2G91I#113J0.
GOTO61
;
N62
G2G91I#113J0.
GOTO57
;
N63
G2G91I#113J0.
GOTO61
;  
; 
; 
N140 
M0 
(I>X)
; 
N141 
M0 
(D>X)
;
N142
M0
(J>D)
; 
N143 
M0 
(W>D)
; 
N144 
M0 
(#100<=#101) 
;
N145
M0
(H<=Z)
; 
N146
M0
('I'OR'W'=#0) 
; 
N147
M0
(I=#0 AND J>0.)
;
N148
M0
(W=#0 AND J>0.)
;
N149
M0
(E=#0)
;
N150
M0
(Z=#0)
;
N151
M0
(H=#0)
;
N152
M0
(B<0)
;
N153
M0
(OTV-YE SLISHKOM MALO DLYA UKAZ-YA #I)
;
N154
M0
(D=#0)
;
%