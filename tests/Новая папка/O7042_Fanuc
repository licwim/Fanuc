%
O7042
(KARMAN/SHPON.PAZ)
(S POSHAGOVYM SPUSKOM)
(NACHINAYET V CENTRE PAZA)
(PRIMER: G65 P7042 D10.X80.I25.Y60.J25.W10. H1. E3. Z-15.R10.)
; 
(D - DIAMETR INSTRUMENTA #7) 
(I - NACHALNIY RAZMER PAZA 'X' #4)
(X - KONECHNIY RAZMER PAZA 'X' #24) 
(J - NACHALNIY RAZMER PAZA 'Y' #5)
(Y - KONECHNIY RAZMER PAZA 'Y' #25)
(R - RADIUS UGLOV #18)
(W - STEP/SYOM NA STORONU #23)
(H* - NACHALNAYA VISOTA #11)
(E* - SYOM PO 'Z' #8)
(Z - Z KONECHNIY #26)
(B*- VISOTA BEZOPASNOSTI #2)
(* - UKAZIVAT' PRI NADOBNOSTI)
; 
; 
#100=150.(PODYYOM PO 'Z' USLOVNIY)
; 
#101=5.(VISOTA OTHODOV) 
;
;
#131=#7
#132=#4
#133=#24
#134=#5
#135=#25
#136=#18
#137=#23
#138=#11
#139=#8
#140=#26
#141=#2
; 
; 
IF[#100LE#101]GOTO150
IF[#2LT0.]GOTO168
;
IF[#2EQ#0]THEN#2=#100
;
#100=#2
IF[#101GT#100]THEN#101=#100
;
;
IF[[#8EQ#0]AND[#11EQ#0]]THEN#102=1.
IF[#102EQ1.]THEN#8=0.01
IF[#102EQ1.]THEN#11=#26+#8
; 
;
(DLYA PEREHODOV PO 'Z')
;
IF [[#11GE0]AND[#26LE0]] THEN #103=ABS[#11]+ABS[#26] 
;
IF [[#11LE0]AND[#26LT0]] THEN #103=ABS[#26]-ABS[#11]
;
IF [[#11GT0]AND[#26GE0]] THEN #103=#11-#26 
;
;
IF [#8GT#103] THEN #8=#103
;
;
;
#125=0.
#119=0.
#130=0.
;
IF[[#24EQ#4]AND[#25NE#5]]GOTO167
IF[[#25EQ#5]AND[#24NE#4]]GOTO167
IF[#4EQ#24]THEN#119=1.
IF[#24LE#7*2.]THEN#125=1.
IF[#25LE#7*2.]THEN#125=1.
IF[#100LE#101]GOTO150
IF[#7EQ#0]GOTO162
IF[[#7GT#24]OR[#7GT#25]]GOTO151
IF[[#119EQ1.]AND[#23GT0.]]GOTO169
IF[[#119EQ0.]AND[#125EQ0.]]THEN#130=1.
IF[[#130EQ1.]AND[#23EQ#0]]GOTO152
IF[[#130EQ1.]AND[#23EQ0.]]GOTO152
IF[[#4NE#0]AND[#5EQ#0]]GOTO153
IF[[#5NE#0]AND[#4EQ#0]]GOTO153
IF[[#4NE#0]AND[#24LE#7*2.]]GOTO163
IF[[#5NE#0]AND[#25LE#7*2.]]GOTO163
IF[[#23NE#0]AND[#125EQ1.]]GOTO165
IF[#18*2.GT#24]GOTO164
IF[#18*2.GT#25]GOTO164
IF[#4GT#24]GOTO154
IF[#5GT#25]GOTO154
IF[#26GT#11]GOTO155
IF[#26EQ#0]GOTO156
IF[#24EQ#0]GOTO157
IF[#25EQ#0]GOTO158
IF[#23GT#7]GOTO159
IF[#8EQ#0]GOTO160
IF[#11EQ#0]GOTO160
IF[[#4NE#0]AND[#4LT#7*2.]]GOTO166
IF[[#5NE#0]AND[#5LT#7*2.]]GOTO166
IF[[#18LT#7/2]AND[#18NE#0]]GOTO161
;
#124=0.
#110=0.
;
;
#111=0.
;
IF[#23EQ#0]THEN #23=0.
IF[#18EQ#0]THEN #18=#7/2.
IF[#4EQ#0]THEN #111=1.
IF[#4EQ#0]THEN #4=#7*2.
IF[#5EQ#0]THEN #5=#7*2.
;
;
#104=#24-#4 (POLNIY SYOM PO 'X')
#105=#25-#5 (POLNIY SYOM PO 'Y')
IF[[#105GE#104]AND[#23GT#105/2.]]THEN #23=#105/2.
IF[[#105LT#104]AND[#23GT#104/2.]]THEN #23=#104/2.
#106=0.
IF[#105GT#104]THEN#106=1.
;
;
;
#107=#7/2.(RADIUS INSTRUMENTA)
#124=FUP[#103/#8] (KOL-VO PROHODOV PO 'Z')
#8=#103/#124
IF[#102EQ1.]THEN #124=1.
IF[#102EQ1.]THEN #8=0.01
;
IF[#101LT#8]THEN #101=#8
;
;
;
N103 (DLYA ODNOGO PROHODA)
IF[#125EQ0.]GOTO104
#112=#24-#7 (HOD 'X' DLYA 1.)
#113=#25-#7 (HOD 'Y' DLYA 1.)
#116=#18-#107
#114=#112/2.
#115=#113/2.
#118=0. (SCHOTCHIK 'Z')
#117=#116*2.
IF[#24LT#25]GOTO203
G0G90Z[#11+#100] 
Z[#11+#101]
G1G90Z#11
#120=#11 (Z)
N101
#120=#120-#8
G0G90Z[#120+#8]
G1G90Z#120
G1G91Y#115
#118=#118+1.
G1G91X[#114-#116]
G2X#116Y-#116R#116
G1Y-[#113-#117]
G2X-#116Y-#116R#116
G1X-[#112-#117]
G2X-#116Y#116R#116
G1Y[#113-#117]
G2X#116Y#116R#116
G1X[#114-#116]
G0G90Z[#120+#101]
G0G91Y-#115
IF[#118LT#124]GOTO101
GOTO102
;
;
N203 (DLYA ODNOGO PROHODA X>Y)
G0G90Z[#11+#100] 
Z[#11+#101]
G1G90Z#11
#120=#11 (Z)
N201
#120=#120-#8
G0G90Z[#120+#8]
G1G90Z#120
G1G91X-#114
#118=#118+1.
G1G91Y[#115-#116]
G2X#116Y#116R#116
G1X[#112-#117]
G2X#116Y-#116R#116
G1Y-[#113-#117]
G2X-#116Y-#116R#116
G1X-[#112-#117]
G2X-#116Y#116R#116
G1Y[#115-#116]
G0G90Z[#120+#101]
G0G91X#114
IF[#118LT#124]GOTO201
GOTO102
;
;
;
N104 (DLYA NESKOL'KIH PROHODOV)
IF[#25GT#24]GOTO204
IF[#119EQ1.]THEN#4=#24-#7
IF[#119EQ1.]THEN#5=#25-#7
#104=#24-#4 (POLNIY SYOM PO 'X')
#105=#25-#5 (POLNIY SYOM PO 'Y')
IF[#119EQ1.]GOTO107
#110=FUP[#104/[#23*2.]] (KOL-VO POVT. X/Y)
IF[#106EQ1.]THEN #110=FUP[#105/[#23*2.]] 
N107
IF[#119EQ1.]THEN#110=1.
#23=[#104/#110]/2. (SHAG PO 'X')
#123=[#105/#110]/2. (SHAG PO 'Y')
#23=FIX[#23*1000.]/1000.
#123=FIX[#123*1000.]/1000.
#129=#123*#110
#116=#18-#107
#108=#116/#110 (+ K RADIUSU)
#108=FIX[#108*1000.]/1000.
#109=#116-#108*#110 (OSTATOK DLYA RADIUSA)
#126=[#5-#7]/2.
;
G0G90Z[#11+#100] 
Z[#11+#101]
G1G90Z#11
#120=#11 (Z)
#118=0. (SCHOTCHIK 'Z')
G0G91Y#126
;
N105
#112=#4-#7 (HOD 'X')
#112=FIX[#112/2*1000.]/1000.*2.
#113=#5-#7 (HOD 'Y')
#113=FIX[#113/2*1000.]/1000.*2.
#127=0. (SCHOT. RADIUSA)
#128=0. (SCHOT. 'X'/'Y')
#120=#120-#8
G0G90Z[#120+#8]
G1G90Z#120
#118=#118+1.
;
N106
#128=#128+1.
#127=#127+#108 
IF[#128EQ#110] THEN #127=#127+#109
#112=#112+#23*2.-#108*2.
IF[#128EQ#110] THEN #112=#112-#109*2.
#112=FIX[#112/2*1000.]/1000.*2.
#113=#113+#123*2.-#108*2.
IF[#128EQ#110] THEN #113=#113-#109*2.
#114=#112/2.
#115=#113/2.
G1G91Y#123
G1G91X#114
G2X#127Y-#127R#127
G1Y-#113
G2X-#127Y-#127R#127
G1G91X-#112
G2X-#127Y#127R#127
G1Y#113
G2X#127Y#127R#127
G1G91X#114
IF[#128LT#110]GOTO106
G0G91Y-#129Z#101
IF[#118LT#124]GOTO105
GOTO102
;
;
;
N204 (DLYA NESKOL'KIH PROHODOV Y>X)
IF[#119EQ1.]THEN#4=#24-#7
IF[#119EQ1.]THEN#5=#25-#7
#104=#24-#4 (POLNIY SYOM PO 'X')
#105=#25-#5 (POLNIY SYOM PO 'Y')
IF[#119EQ1.]GOTO107
#110=FUP[#104/[#23*2.]] (KOL-VO POVT. X/Y)
IF[#106EQ1.]THEN #110=FUP[#105/[#23*2.]] 
N207
IF[#119EQ1.]THEN#110=1.
#23=[#104/#110]/2. (SHAG PO 'X')
#123=[#105/#110]/2. (SHAG PO 'Y')
#23=FIX[#23*1000.]/1000.
#123=FIX[#123*1000.]/1000.
#129=#23*#110
#116=#18-#107
#108=#116/#110 (+ K RADIUSU)
#108=FIX[#108*1000.]/1000.
#109=#116-#108*#110 (OSTATOK DLYA RADIUSA)
#126=[#4-#7]/2.
;
G0G90Z[#11+#100] 
Z[#11+#101]
G1G90Z#11
#120=#11 (Z)
#118=0. (SCHOTCHIK 'Z')
G0G91X-#126
;
N205
#112=#4-#7 (HOD 'X')
#112=FIX[#112/2*1000.]/1000.*2.
#113=#5-#7 (HOD 'Y')
#113=FIX[#113/2*1000.]/1000.*2.
#127=0. (SCHOT. RADIUSA)
#128=0. (SCHOT. 'X'/'Y')
#120=#120-#8
G0G90Z[#120+#8]
G1G90Z#120
#118=#118+1.
;
N206
#128=#128+1.
#127=#127+#108 
IF[#128EQ#110] THEN #127=#127+#109
#112=#112+#23*2.-#108*2.
IF[#128EQ#110] THEN #112=#112-#109*2.
#113=#113+#123*2.-#108*2.
IF[#128EQ#110] THEN #113=#113-#109*2.
#114=#112/2.
#115=#113/2.
G1G91X-#23
G1G91Y#115
G2X#127Y#127R#127
G1X#112
G2X#127Y-#127R#127
G1G91Y-#113
G2X-#127Y-#127R#127
G1X-#112
G2X-#127Y#127R#127
G1G91Y#115
IF[#128LT#110]GOTO206
G0G91X#129Z#101
IF[#118LT#124]GOTO205
GOTO102
;
;
;
N102
;
G0G90Z[#11+#100]
;
#100=0.
#101=0.
#102=0.
#103=0.
#104=0.
#105=0.
#106=0.
#107=0.
#108=0.
#109=0.
#110=0.
#111=0.
#112=0.
#113=0.
#114=0.
#115=0.
#116=0.
#117=0.
#118=0.
#119=0.
#120=0.
#121=0.
#122=0.
#123=0.
#124=0.
#125=0.
#126=0.
#127=0.
#128=0.
#129=0.
#130=0.
;
#7=#131
#4=#132
#24=#133
#5=#134
#25=#135
#18=#136
#23=#137
#11=#138
#8=#139
#26=#140
#2=#141
; 
M99
;
;
;
N150
M0 
(#100<=#101) 
; 
N151
M0 
(D > RAZMERA PAZA) 
; 
N152
M0 
(NE UKAZAN SYOM 'W') 
; 
N153
M0 
(NE UKAZAN NACHALNIY RAZMER) 
; 
N154
M0 
(NACHALNIY RAZMER > KONECHNOGO) 
; 
N155
M0 
(Z>H) 
; 
N156
M0 
(Z#0) 
; 
N157
M0 
(X#0) 
; 
N158
M0 
(Y#0) 
; 
N159
M0 
(W>D) 
; 
N160
M0
(UKAZAN H, E#0 / UKAZAN E, H#0)
; 
N161
M0
(R<D/2) 
;
N162
M0
(D#0) 
;
N163
M0
(PAZ SLISHKOM MAL DLYA UKAZ-YA #I/#J) 
;
N164
M0
(BOL'SHOYE ZNACHENIYE #R) 
;
N165
M0
(PAZ SLISHKOM MAL DLYA UKAZ-YA #W) 
;
N166
M0
(NACH.RAZMER < D*2) 
;
N167
M0
(X=I, Y<>J ILI NAOBOROT)
;
N168
M0
(MALOYE ZNACHENIYE 'B')
;
N169
M0
(LISHNIY SHAG 'W' ILI UKAZAT' I/J)
;
%